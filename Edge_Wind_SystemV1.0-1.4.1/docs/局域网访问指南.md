# 局域网访问配置指南

## 🌐 局域网访问地址

您的服务器IP地址：
- **主IP**: `10.34.28.228`
- **备用IP**: `198.18.0.1`

### 访问地址（端口：5000）

**局域网内其他设备访问**:
```
http://10.34.28.228:5000
```

或者:
```
http://198.18.0.1:5000
```

**本机访问**:
```
http://localhost:5000
```

---

## ⚠️ 重要变更

### 端口说明
- **推荐端口**: 5000（与模拟器默认一致）

如果局域网设备之前保存了书签，需要更新为：
```
http://10.34.28.228:5000
```

---

## 🔧 如果无法访问，请检查：

### 1. 防火墙设置
Windows防火墙可能阻止了5000端口，运行以下命令添加规则：

```powershell
# 以管理员身份运行PowerShell，执行：
New-NetFirewallRule -DisplayName "EdgeWind-5000" -Direction Inbound -Protocol TCP -LocalPort 5000 -Action Allow
```

或者手动添加：
1. 打开 Windows Defender 防火墙
2. 高级设置 → 入站规则 → 新建规则
3. 端口 → TCP → 特定本地端口：5000
4. 允许连接 → 完成

### 2. 确认服务器正在运行
```bash
netstat -ano | findstr :5000
```
应该看到类似：
```
TCP    0.0.0.0:5000    0.0.0.0:0    LISTENING
```

### 3. 测试局域网连接
在其他设备上ping服务器：
```bash
ping 10.34.28.228
```

---

## 🚀 快速恢复局域网访问

### 方法1：添加防火墙规则（推荐）
推荐直接双击项目根目录内置脚本：`添加防火墙规则.bat`（以管理员身份运行）。

如果需要手动创建脚本，可参考下面的 `add_firewall_rule.bat` 示例（以管理员身份运行）：

```batch
@echo off
echo 正在添加防火墙规则...
netsh advfirewall firewall add rule name="EdgeWind-5000" dir=in action=allow protocol=TCP localport=5000
echo 完成！现在可以通过局域网访问了。
pause
```

### 方法2：临时关闭防火墙测试
```bash
# 仅用于测试，不推荐长期使用
netsh advfirewall set allprofiles state off
```

---

## 📱 移动设备访问

在手机/平板浏览器输入：
```
http://10.34.28.228:5000
```

---

## 🔄 如果需要改回5000端口

1. 先关闭占用5000端口的程序
2. 修改 `start_server.bat`，删除或修改这行：
   ```batch
   set PORT=5000
   ```
3. 重新启动服务器

---

## ✅ 验证局域网访问

在局域网内的另一台电脑上：
1. 打开浏览器
2. 访问：`http://10.34.28.228:5000`
3. 应该能看到EdgeWind登录页面

---

## 📞 故障排查

如果还是无法访问：

1. **检查服务器是否运行**:
   ```bash
   tasklist | findstr python
   ```

2. **检查端口监听**:
   ```bash
   netstat -ano | findstr :5000
   ```

3. **查看日志**:
   ```bash
   type logs\edgewind.log
   ```

4. **测试本地访问**:
   先确认 `http://localhost:5000` 能访问

5. **检查网络**:
   确保设备在同一局域网内

---

*提示：如果之前能访问，现在不能，优先检查是否有旧进程占用 5000 端口，以及防火墙是否放行 5000。*

